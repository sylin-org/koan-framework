{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Koan": "Debug"
    }
  },
  "AllowedHosts": "*",
  "Urls": "http://localhost:27500",

  "Koan": {
    "Context": {
      "ProjectResolution": {
        "FollowSymbolicLinks": true,
        "MatchAncestorProjects": true,
        "MaxAncestorDepth": 2,
        "AutoCreateProjectOnQuery": true,
        "AutoIndexInBackground": true,
        "AutoIndexRequireGitRepository": false,
        "AutoIndexMaxSizeGB": 10,
        "TopKMode": "per-project"
      },
      "FileMonitoring": {
        "Enabled": true,
        "DebounceMilliseconds": 2000,
        "BatchWindowMilliseconds": 5000,
        "MaxConcurrentReindexOperations": 3,
        "MaxConcurrentFileWatchers": 10,
        "RestartOnFailure": true,
        "RestartDelayMilliseconds": 5000
      }
    },
    "Data": {
      "Weaviate": {
        "DefaultTopK": 10,
        "MaxTopK": 100,
        "Dimension": 384,
        "Metric": "cosine",
        "TimeoutSeconds": 30
      },
      "Sources": {
        "Default": {
          "Adapter": "sqlite",
          "ConnectionString": "Data Source=Data/Koan.sqlite"
        }
      }
    },
    "AI": {
      "Embedding": {
        "Provider": "ollama",
        "Model": "all-minilm",
        "Endpoint": "http://localhost:11434"
      }
    },
    "Orchestration": {
      "Services": {
        "weaviate": "always"
      },
      "Weaviate": {
        "Image": "semitechnologies/weaviate:latest",
        "HostPort": 27501,
        "ContainerPort": 8080,
        "VolumeName": "koan-weaviate-data",
        "HealthCheckPath": "/v1/.well-known/ready",
        "Environment": {
          "QUERY_DEFAULTS_LIMIT": "25",
          "AUTHENTICATION_ANONYMOUS_ACCESS_ENABLED": "true",
          "PERSISTENCE_DATA_PATH": "/var/lib/weaviate",
          "DEFAULT_VECTORIZER_MODULE": "none",
          "ENABLE_MODULES": "",
          "CLUSTER_HOSTNAME": "node1"
        }
      }
    },
    "Mcp": {
      "EnableStdioTransport": true,
      "EnableHttpSseTransport": true,
      "RequireAuthentication": false,
      "EnableCors": false,
      "AllowedOrigins": [],
      "PublishCapabilityEndpoint": true,
      "HttpSseRoute": "/mcp",
      "CodeMode": {
        "Enabled": true,
        "Runtime": "Jint",
        "PublishSdkEndpoint": true,
        "Sandbox": {
          "CpuMilliseconds": 2000,
          "MemoryMegabytes": 64,
          "MaxRecursionDepth": 100,
          "MaxCodeLength": 50000
        },
        "MaxSdkCalls": 100,
        "MaxLogEntries": 50,
        "RequireAnswer": true
      }
    }
  }
}
