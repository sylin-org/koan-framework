<section class="space-y-6 md:space-y-8" aria-label="Dashboard">
  <div class="flex items-center gap-2">
    <input type="search" placeholder="Search pantry (q=)" class="w-full md:w-96 rounded-xl bg-white ring-1 ring-gray-200 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary-400" ng-model="vm.q" ng-keydown="vm.searchEnter($event)">
    <button class="hidden md:inline rounded-xl px-4 py-2 bg-white text-gray-900 ring-1 ring-gray-200 hover:bg-gray-50">JSON Filter</button>
  </div>

  <div>
    <h2 class="text-xl md:text-2xl font-semibold mb-2">Expiring Soon</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4">
      <div ng-repeat="p in vm.expiring" class="bg-white rounded-2xl shadow-sm p-4 md:p-6 relative transition-shadow hover:shadow translate-y-0 hover:translate-y-[1px]">
        <div class="font-medium text-gray-900">{{p.name}}</div>
        <div class="text-sm text-gray-500">{{p.quantity}} {{p.unit}}</div>
        <div class="mt-2 text-xs">
          <span class="rounded-full px-2.5 py-0.5 font-medium ring-1" ng-class="{'bg-rose-50 text-rose-700 ring-rose-200':true}">Expires {{p.expiresAt | date}}</span>
        </div>
        <a href="#/pantry" class="absolute inset-0" aria-label="Open in Pantry"></a>
        <cap-overlay-pill ng-if="$root.ui.capOverlay" text="data/pantry" detail="GET /api/data/pantry?filter=...&page=1&pageSize=5&sort=ExpiresAt"></cap-overlay-pill>
      </div>
    </div>
  </div>

  <div>
    <h2 class="text-xl md:text-2xl font-semibold mb-2">Suggested Meals</h2>
    <div class="flex overflow-x-auto gap-3 md:gap-4 pb-2 snap-x">
      <div ng-repeat="r in vm.meals" class="min-w-[230px] bg-white rounded-2xl shadow-sm p-4 snap-start transition-shadow hover:shadow translate-y-0 hover:translate-y-[1px]">
        <div class="font-medium truncate text-gray-900">{{ (r.recipe && r.recipe.name) || r.name }}</div>
        <div class="text-sm text-gray-500">Prep {{ ((r.recipe && r.recipe.prepTimeMinutes) || r.prepTimeMinutes) || 30 }} min</div>
        <div class="h-1.5 bg-gray-100 rounded mt-2"><div class="h-1.5 bg-primary-600 rounded" ng-style="{ width: ((r.availabilityScore||0.8)*100) + '%' }"></div></div>
        <div class="mt-2 flex flex-wrap gap-1 -mx-0.5">
          <span ng-repeat="m in (r.missingIngredients||[])" class="mx-0.5 text-[10px] px-2 py-0.5 rounded-full bg-gray-100 text-gray-700 ring-1 ring-gray-200">{{m}}</span>
        </div>
        <button class="mt-3 inline-flex items-center gap-2 rounded-xl px-4 py-2 bg-primary-600 text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-400">Add to Plan</button>
        <cap-overlay-pill ng-if="$root.ui.capOverlay" text="action:suggest" detail="POST /api/meals/suggest"></cap-overlay-pill>
      </div>
    </div>
  </div>

  <div>
    <h2 class="text-xl md:text-2xl font-semibold mb-2">Insights</h2>
    <div class="bg-white rounded-2xl shadow-sm p-4 md:p-6 flex items-center gap-6">
      <div>
        <div class="text-3xl font-semibold text-gray-900">{{vm.stats.totalItems || 0}}</div>
        <div class="text-sm text-gray-500">Total items</div>
      </div>
      <div>
        <div class="text-3xl font-semibold text-gray-900">{{vm.stats.expiringSoon || 0}}</div>
        <div class="text-sm text-gray-500">Expiring &lt; 7d</div>
      </div>
    </div>
  </div>
</section>
