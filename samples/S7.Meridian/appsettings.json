{
  "Koan": {
    "Data": {
      "Mongo": {
        "Database": "Meridian"
      },
      "Vector": {
        "Profiles": {
          "meridian:evidence": {
            "TopK": 12,
            "Alpha": 0.5,
            "Description": "Hybrid search profile for passage-level evidence retrieval"
          }
        }
      }
    },
    "Storage": {
      "DefaultProfile": "meridian",
      "Providers": {
        "Local": {
          "BasePath": "./storage"
        }
      },
      "Profiles": {
        "meridian": {
          "Provider": "local",
          "Container": "pipelines"
        }
      }
    },
    "Ai": {
      "Ollama": {
        "RequiredModels": [ "granite3.3:8b" ],
        "DefaultModel": "granite3.3:8b"
      }
    }
  },
  "Meridian": {
    "Retrieval": {
      "TopK": 12,
      "Alpha": 0.5,
      "MmrLambda": 0.7,
      "MaxTokensPerField": 2000
    },
    "Extraction": {
      "ParallelismDegree": 0,
      "Model": null,
      "Temperature": 0.3,
      "MaxOutputTokens": 500,
      "Ocr": {
        "Enabled": true,
        "BaseUrl": "http://localhost:6060/",
        "Endpoint": "ocr",
        "TimeoutSeconds": 90,
        "ConfidenceFloor": 0.6
      }
    },
    "Merge": {
      "EnableExplainability": true,
      "EnableCitations": true,
      "EnableNormalizedComparison": true,
      "DefaultSourcePrecedence": [
        "AuditedFinancial",
        "VendorPrescreen",
        "KnowledgeBase",
        "Unclassified"
      ],
      "Policies": {
        "$.revenue": {
          "Strategy": "sourcePrecedence",
          "SourcePrecedence": [
            "AuditedFinancial",
            "VendorPrescreen",
            "KnowledgeBase"
          ],
          "Transform": "normalizeToUsd"
        },
        "$.employees": {
          "Strategy": "latest",
          "Transform": "numberRounding:0"
        },
        "$.productLines": {
          "Strategy": "collection",
          "CollectionStrategy": "union",
          "Transform": "dedupeFuzzy"
        },
        "$.complianceStatus": {
          "Strategy": "consensus",
          "ConsensusMinimumSources": 2,
          "Transform": "stringToEnum"
        },
        "$.executiveSummary": {
          "Strategy": "highestConfidence"
        }
      }
    },
    "Classification": {
      "HeuristicConfidenceThreshold": 0.9,
      "VectorConfidenceThreshold": 0.75,
      "Types": [
        {
          "Id": "AuditedFinancial",
          "Name": "Audited Financial Statement",
          "Description": "Annual or quarterly audited financial report containing revenue and employee counts.",
          "Version": 1,
          "FilenamePatterns": [ "10k", "financial", "annualreport" ],
          "Keywords": [ "revenue", "net income", "fiscal", "employees" ],
          "ExpectedPageCountMin": 20,
          "ExpectedPageCountMax": 400,
          "MimeTypes": [ "application/pdf" ]
        },
        {
          "Id": "VendorPrescreen",
          "Name": "Vendor Prescreen Questionnaire",
          "Description": "Questionnaire or RFI used to prescreen vendors prior to selection.",
          "Version": 1,
          "FilenamePatterns": [ "prescreen", "rfi", "questionnaire" ],
          "Keywords": [ "vendor", "questionnaire", "evaluation", "scorecard" ],
          "ExpectedPageCountMin": 2,
          "ExpectedPageCountMax": 80,
          "MimeTypes": [ "application/pdf", "application/vnd.openxmlformats-officedocument.wordprocessingml.document" ]
        },
        {
          "Id": "KnowledgeBase",
          "Name": "Knowledge Base Article",
          "Description": "General purpose internal knowledge base or policy article.",
          "Version": 1,
          "FilenamePatterns": [ "kb", "policy", "guide" ],
          "Keywords": [ "overview", "guidelines", "policy", "process" ],
          "ExpectedPageCountMin": 1,
          "ExpectedPageCountMax": 50,
          "MimeTypes": [ "application/pdf", "text/plain" ]
        }
      ]
    },
    "Rendering": {
      "Pandoc": {
        "Enabled": true,
        "BaseUrl": "http://localhost:7070/",
        "Endpoint": "render",
        "TimeoutSeconds": 240,
        "SanitizeLatex": true
      }
    },
    "Confidence": {
      "LowThreshold": 0.7,
      "HighThreshold": 0.9
    }
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Koan": "Information",
      "Koan.Samples.Meridian": "Debug"
    }
  },
  "AllowedHosts": "*"
}
